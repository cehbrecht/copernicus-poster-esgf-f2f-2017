%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[portrait,a0paper,fontscale=0.4]{baposter} % Adjust the font scale/size here

\usepackage{calc}
\usepackage{relsize}   % For \smaller
%\usepackage{multirow}
%\usepackage{rotating}
%\usepackage{bm}
\usepackage{url}       % For \url

\usepackage{graphicx}
\usepackage{subcaption} % For floating figures

\usepackage{multicol} % Required for multiple columns
\usepackage{wrapfig}
%\setlength{\columnsep}{1.5em} % Slightly increase the space between columns
%\setlength{\columnseprule}{0mm} % No horizontal rule between columns

\usepackage{tikz} % Required for flow chart
\usetikzlibrary{calc}

%\usepackage{times}
%\usepackage{helvet}
%\usepackage{bookman}
\usepackage{palatino}

%%% Global Settings %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\graphicspath{{images/}}	% Root directory of the pictures
%\tracingstats=2			% Enabled LaTeX logging with conditionals

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Save space in lists. Use this after the opening of the list
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\compresslist}{%
\setlength{\itemsep}{1pt}%
\setlength{\parskip}{0pt}%
\setlength{\parsep}{0pt}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Begin of Document
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Here starts the poster
%%%---------------------------------------------------------------------------
%%% Format it to your taste with the options
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Define some colors

%\definecolor{lightblue}{cmyk}{0.83,0.24,0,0.12}
\definecolor{lightblue}{rgb}{0.145,0.6666,1}

%%
\begin{poster}%
  % Poster Options
  {
  % Show grid to help with alignment
  grid=false,
  % Number of columns
  columns=3,
  % Column spacing
  colspacing=1em,
  % Color style
  bgColorOne=white, % Background color for the gradient on the left side of the poster
  bgColorTwo=white, % Background color for the gradient on the right side of the poster
  borderColor=lightblue, % Border color
  headerColorOne=black, % Background color for the header in the content boxes (left side)
  headerColorTwo=lightblue, % Background color for the header in the content boxes (right side)
  headerFontColor=white, % Text color for the header text in the content boxes
  boxColorOne=white, % Background color of the content boxes
  boxColorTwo=lightblue,
  % Format of textbox
  textborder=roundedleft,
  % Format of text header
  eyecatcher=true, % Set to false for ignoring the left logo in the title and move the title left
  headerborder=closed, % Adds a border around the header of content boxes
  headerheight=0.15\textheight, % Height of the header
  headershape=roundedright, % Specify the rounded corner in the content box headers
  headershade=shadelr,
  headerfont=\Large\bf\textsc, %Sans Serif
  % textfont={\setlength{\parindent}{1.5em}},
  % boxshade=plain,
  % background=shade-tb,
  % background=plain,
  linewidth=2pt
  }
%%% Eye Cacther %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  {

  }
%%% Title %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  {\sf\bf
          A Web Processing Service for\\ Copernicus Climate Change Service
  }
%%% Authors %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  {
    \vspace{1em} A. Stephens, S. Kindermann, S. Denvil, W. Som de Cerff\\
    {\smaller Centre for Environmental Data Analysis (CEDA),
    German Climate Compute Centre (DKRZ),\\
    Institut Pierre Simon Laplace (IPSL),
    Royal Netherlands Meteorological Institute (KNMI)\\[1em]
    ESGF F2F Meeting, San Francisco, 2017}
  }
%%% Logo %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  {
    \includegraphics[width=10em]{ipsl-logo}
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Now define the boxes that make up the poster
%%%---------------------------------------------------------------------------
%%% Each box has a name and can be placed absolutely or relatively.
%%% The only inconvenience is that you can only specify a relative position
%%% towards an already declared box. So if you have a box attached to the
%%% bottom, one to the top and a third one which should be in between, you
%%% have to specify the top and bottom boxes before you specify the middle
%%% box.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\headerbox{Copernicus Climate Change Service}{name=copernicus,column=0,row=0}{
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \includegraphics[width=5em]{copernicus-logo}
  \includegraphics[width=0.8\textwidth]{copernicus}

  \begin{enumerate}\compresslist
    \item Copernicus is the European Union's earth observation programme
    \item Data from multiple sources: earth observation, satellites and in situ sensors
    \item Thematic areas: land, marine, atmosphere, \emph{climate change},
        emergency management, security
    \item The main users of Copernicus services are policymakers and public authorities
  \end{enumerate}

}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\headerbox{Climate Change Service (C3S)}{name=c3s,column=0,below=copernicus}{
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \center
  \includegraphics[width=5em]{c3s-logo}
  \includegraphics[width=0.5\linewidth]{c3s-global-average-tas}
  \includegraphics[width=0.3\linewidth]{c3s-usage}

  \begin{enumerate}\compresslist
    \item Information for monitoring and predicting climate change
    \item Helps to support adaptation and mitigation
    \item The service will provide access to several climate indicators
      and climate indices for both the identified climate drivers and the expected climate impacts.
    \item Helps users assess Global Climate
    Models (GCMs) projections using well-established
    metrics and manipulation tools and receive outputs
    tailored to their needs
    \item provide products that address the needs of the
      coastal, water, insurance and energy sectors
  \end{enumerate}

  Users benefits are:
  \begin{enumerate}\compresslist
    \item no need to download and store large data sets
    \item data access from anywhere
    \item easily performing the same analysis for several datasets
    \item automatically generated metrics for indicating data sets quality
    \item logged commands to make work reproducible
    \item pre-defined functionalities for reducing programming work-load
    \item easier usability of climate model data by tailored tools
    for specific sectors (insurance, water, energy, coastal)
  \end{enumerate}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\headerbox{Climate Data Store (CDS)}{name=cds,column=0,span=1,below=c3s}{
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \includegraphics[width=1.0\linewidth]{cds}

  \begin{enumerate}\compresslist
    \item A climate data store will contain the geophysical information needed to analyse the climate change indicators in a consistent and harmonised way.
    \item This will combine the functions of a distributed data centre with a set of services and facilities for users and content developers.
    \item The store will provide data resources and computing facilities that can be utilised, for example, to develop improved climate reanalyses and seasonal forecasts.
  \end{enumerate}
}

 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 \headerbox{Compute for CDS}{name=cp4cds,column=0,span=1,below=cds}{
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    % Climate Projections for the Climate Data Store (CP4CDS).
    % The Copernicus Climate Data Store (CDS) will interact with remote data and compute services,
    % amongst which will be those providing global climate projections.
    % An Earth System Grid Federation (ESGF) node and concomitant compute services
    % providing access to a coherent collection of quality assured climate projections.
    % CP4CDS will be delivered by a consortium of three of the leading European institutes

    \includegraphics[width=6cm]{wps_adamsteer}

    \begin{enumerate}\compresslist
       \item identifying, acquiring and quality controlling the relevant data
       \item data nodes - consisting of vanilla ESGF index and data nodes
       \item compute nodes - based on the Web Processing Service (WPS)
       \item SDDS - Software Dependency Deployment Solution to support the development of codes
       \item All web-service access will require users to be authenticated and authorised
       \item Federated data nodes
       \item Data store with CMIP5 and CORDEX data - selected for C3S and quality checked
    \end{enumerate}
    \vspace{0.3em}
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\headerbox{References}{name=references,column=0,below=cp4cds}{
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \smaller													% Make the whole text smaller
  \vspace{-0.4em} 									% Save some space at the beginning
  \bibliographystyle{plain}					% Use plain style
  \renewcommand{\section}[2]{\vskip 0.05em}		% Omit "References" title
  \begin{thebibliography}{1}							% Simple bibliography with widest label of 1
    \itemsep=-0.01em										% Save space between the separation
    \setlength{\baselineskip}{0.4em}					% Save space with longer lines
    \bibitem{prevWork1} Laszlo Gulyas, Richard Legendi: \emph{Effects of Sample Duration on Network Statistics in Elementary Models of Dynamic Networks}, International Conference on Computational Science, Singapore (2011)
    \bibitem{prevWork2} Laszlo Gulyas, Susan Khor, Richard Legendi and George Kampis \emph{Cumulative Properties of Elementary Dynamic Networks}, The International Sunbelt Social Network Conference XXXI (2011)
  \end{thebibliography}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\headerbox{Architecture}{name=arch,column=1,span=2,row=0}{
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \begin{multicols}{2}
    \includegraphics[width=0.7\linewidth]{copernicus-wps}
    \includegraphics[width=0.7\linewidth]{pywps-scheduler-extension}
    \begin{enumerate}\compresslist
      \item OGC WPS standard based interface to processing functionalities deployed at CP4CDS data centers
      \item deployed near to the high volume climate data archives
      \item A WPS request (HTTP GET/POST) comes from a WPS client.
      \item The Nginx/Gunicorn combination delegates the request to the PyWPS WSGI application
      \item Gunicorn spawns several workers to use the available CPUs on a single compute node
      \item Processing outputs and status documents are web accessible by the Nginx file-service
      \item A firewall allows only access to the public service interface
      \item WPS Processes are defined for ESMValTool diagnostics
      \item ESMValTool has read- only access to the climate data pool on
        file-system with CMIP5 climate model and observational data.
    \end{enumerate}
  \end{multicols}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\headerbox{Technology}{name=tech,column=1,span=2,below=arch}{
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \begin{multicols}{2}
    %\begin{wrapfigure}{l}{0.7\linewidth}
      \includegraphics[width=0.2\linewidth]{pywps}
      %\caption{This is the Share\LaTeX{} logo}
    %\end{wrapfigure}

    \begin{enumerate}\compresslist
      \item An implementation of the OGC Web Processing Service standard
      \item Implements WPS 1.0.0 standard (WPS 2.0.0 in progress)
      \item Coded in the Python language (researcher friendly)
      \item Easy to hack (developer friendly)
      \item Relevant contributions by over a dozen individuals
      \item OSGeo accreditation around the corner \ldots
    \end{enumerate}

    \includegraphics[width=0.2\linewidth]{nginx}
    \begin{enumerate}\compresslist
      \item Nginx - security, reverse proxy, load balancing
      \item Essentially a web (HTTP) server
      \item But more used for reverse-proxy
      \item Acts as a single entrance point to all requests
      \item Redirects requests to Gunicorn
      \item Can redirect to multiple Gunicorns
      \item Gateway to multiple servers and applications from a single URL
    \end{enumerate}

    \includegraphics[width=0.2\linewidth]{gunicorn}
    \begin{enumerate}\compresslist
      \item Gunicorn - concurrency, WSGI
      \item WSGI - Common interface to multiple web applications frameworks
      \item Easy to configure and use with Python
      \item Promotes the concepts of ``workers''
      \item Each worker can run on a different CPU core
    \end{enumerate}

    %\includegraphics[width=0.2\linewidth]{gunicorn}
    {\bf SUPERVISOR}
    \begin{enumerate}\compresslist
      \item Supervisor - A Process Control System
      \item Monitor and control a number of processes on UNIX
      \item Used to control processes related to a project
    \end{enumerate}

    \includegraphics[width=0.2\linewidth]{conda}
    \begin{enumerate}\compresslist
      \item Python package manager
      \item Environments
    \end{enumerate}

    \includegraphics[width=0.1\linewidth]{ansible}
    \begin{enumerate}\compresslist
      \item Ansible - simple IT automation
      \item Just a Python library - no services necessary
      \item using ``ssh'' for remote deployments
    \end{enumerate}

    \includegraphics[width=0.2\linewidth]{docker}
    \begin{enumerate}\compresslist
      \item An OS level virtualisation engine
      \item Docker runs software \textit{containers}
    \end{enumerate}

    \includegraphics[width=0.4\linewidth]{esmvaltool}
    \begin{enumerate}\compresslist
      \item A community diagnostic and performance metrics tool for routine evaluation of Earth system models in CMIP
      \item Collection of diagnostics implemented in Python and NCL
    \end{enumerate}
  \end{multicols}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\headerbox{SDDS - Software Deployment Dependency Solution}{name=sdds,column=1,span=2,below=tech}{
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \begin{multicols}{3}
    \begin{center}
      \includegraphics[width=0.6\linewidth]{sdds}
      \captionof{figure}{Compute node template}
    \end{center}

    \begin{center}
      \includegraphics[width=0.8\linewidth]{sdds-workflow}
      \captionof{figure}{Workflow of creating a new compute node}
    \end{center}

    \begin{center}
      \includegraphics[width=0.8\linewidth]{sdds-update-cycle}
      \captionof{figure}{Update cycle for compute node}
    \end{center}
  \end{multicols}

  % \begin{enumerate}\compresslist
  %   \item Compute Node capable of hosting processing codes from external projects
  %   \item Compute Node will employ the Web Processing Service (WPS) standard
  %   \item CP4CDS project is developing a system for managing different software environments in a re-usable manner
  %   \item consists of code and library repositories to support the management,
  %     testing and deployment of processing code that will be made available via the production service
  %   \item The CP4CDS Compute Node provides hosted and scalable processing
  %     capabilities using the OGC Web Processing Service
  %   \item It consists of a software environment and application, managed through a GitHub repository,
  %     which includes a basic template of a working WPS process.
  %     The template uses a Conda "environment" to record the software dependencies
  %   \item Conda as the tool to build reproducible software environments
  %   \item intend to employ Docker to provide the Compute Node through containers
  %   \item "production" environment run by the CP4CDS partners: STFC CEDA, IPSL and DKRZ.
  % \end{enumerate}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\headerbox{Example}{name=run,column=1,span=2,below=sdds}{
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \begin{multicols}{3}
    \includegraphics[width=0.7\linewidth]{phoenix-example}
    \includegraphics[width=0.7\linewidth]{c4i-example}
    \includegraphics[width=0.7\linewidth]{c3s-web-client-example}
  \end{multicols}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\headerbox{Outlook}{name=outlook,column=1,span=2,below=run}{
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \begin{enumerate}\compresslist
    \item C3S overview and C3S Climate Data Store (CDS)
    \item The CP4CDS project overview: ESGF Data Nodes, Index Nodes and CP4CDS Compute Nodes, load-balancing across sites, QC'd CMIP5 data.
    \item Requirement to deploy code from other projects/groups into the CP4CDS Compute Node, such as ESMValTool.
    \item Chosen technology: Birdhouse WPS environment
    \item Why Birdhouse? python, open source, actively developed, good design, client/security components, PyWPS extensions.
    \item SDDS/Compute Node overview: including PyWPS cluster configuration for scalability.
    \item SDDS workflow: template, GitHub fork etc
    \item Status and next steps
  \end{enumerate}
}

\end{poster}

\end{document}
